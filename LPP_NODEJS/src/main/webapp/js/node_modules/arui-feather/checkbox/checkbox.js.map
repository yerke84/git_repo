{"version":3,"sources":["checkbox/checkbox.jsx"],"names":["CheckBox","state","focused","hovered","checked","cn","props","undefined","size","disabled","id","handleFocus","handleBlur","handleMouseEnter","handleMouseLeave","root","type","renderButtonCheckbox","renderNormalCheckbox","name","value","handleChange","text","title","nextCheckedValue","setState","onChange","event","onFocus","onBlur","onMouseEnter","onMouseLeave","focus","document","activeElement","blur","elementRect","getBoundingClientRect","targetY","top","window","pageYOffset","Component","propTypes","node","string","oneOf","bool","theme","className","oneOfType","func","defaultProps"],"mappings":"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","file":"checkbox.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport Button from '../button/button';\n\nimport cn from '../cn';\nimport performance from '../performance';\nimport scrollTo from '../lib/scroll-to';\nimport { SCROLL_TO_CORRECTION } from '../vars';\n\n/**\n * Компонент чекбокса.\n */\n@cn('checkbox')\n@performance()\nclass CheckBox extends React.Component {\n    static propTypes = {\n        /** Текст подписи к чекбоксу */\n        text: Type.node,\n        /** Идентификатор компонента в DOM */\n        id: Type.string,\n        /** Имя компонента в DOM */\n        name: Type.string,\n        /** Текст всплывающей подсказки */\n        title: Type.string,\n        /** Значение чекбокса, которое будет отправлено на сервер, если он выбран */\n        value: Type.string,\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Тип чекбокса */\n        type: Type.oneOf(['normal', 'button']),\n        /** Управление возможностью изменять состояние 'checked' компонента */\n        disabled: Type.bool,\n        /** Управление состоянием вкл/выкл компонента */\n        checked: Type.bool,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.oneOfType([Type.func, Type.string]),\n        /** Обработчик изменения значения 'checked' компонента, принимает на вход isChecked и value компонента */\n        onChange: Type.func,\n        /** Обработчик фокуса комнонента */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса компонента */\n        onBlur: Type.func,\n        /** Обработчик события наведения курсора на чекбокс */\n        onMouseEnter: Type.func,\n        /** Обработчик события снятия курсора с чекбокса */\n        onMouseLeave: Type.func\n    };\n\n    static defaultProps = {\n        type: 'normal',\n        size: 'm'\n    };\n\n    state = {\n        focused: false,\n        hovered: false,\n        checked: false\n    };\n\n    root;\n\n    render(cn) {\n        let checked = this.props.checked !== undefined\n            ? this.props.checked\n            : this.state.checked;\n\n        return (\n            <label\n                className={ cn({\n                    size: this.props.size,\n                    disabled: this.props.disabled,\n                    checked,\n                    focused: this.state.focused,\n                    hovered: this.state.hovered\n                }) }\n                htmlFor={ this.props.id }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n                onMouseEnter={ this.handleMouseEnter }\n                onMouseLeave={ this.handleMouseLeave }\n                ref={ (root) => { this.root = root; } }\n            >\n                {\n                    this.props.type === 'button'\n                        ? this.renderButtonCheckbox(cn, checked)\n                        : this.renderNormalCheckbox(cn, checked)\n                }\n            </label>\n        );\n    }\n\n    renderNormalCheckbox(cn, checked) {\n        return (\n            <div>\n                <span className={ cn('box') }>\n                    <input\n                        className={ cn('control') }\n                        type='checkbox'\n                        autoComplete='off'\n                        name={ this.props.name }\n                        id={ this.props.id }\n                        value={ this.props.value }\n                        checked={ checked }\n                        disabled={ this.props.disabled }\n                        onChange={ this.handleChange }\n                    />\n                </span>\n                {\n                    this.props.text &&\n                    <span\n                        className={ cn('text') }\n                        role='presentation'\n                    >\n                        { this.props.text }\n                    </span>\n                }\n            </div>\n        );\n    }\n\n    renderButtonCheckbox(cn, checked) {\n        return (\n            <div>\n                <Button\n                    togglable='check'\n                    checked={ checked }\n                    title={ this.props.title }\n                    disabled={ this.props.disabled }\n                    size={ this.props.size || 'm' }\n                    focused={ this.state.focused }\n                    hovered={ this.state.hovered }\n                    view={ checked ? 'action' : null }\n                    onClick={ this.handleChange }\n                >\n                    {\n                        this.props.text\n                            ? this.props.text\n                            : ''\n                    }\n                </Button>\n                <input\n                    className={ cn('control') }\n                    type='checkbox'\n                    tabIndex={ -1 }\n                    autoComplete='off'\n                    name={ this.props.name }\n                    id={ this.props.id }\n                    value={ this.props.value }\n                    checked={ checked }\n                    disabled={ this.props.disabled }\n                    onChange={ this.handleChange }\n                />\n            </div>\n        );\n    }\n\n    @autobind\n    handleChange() {\n        if (!this.props.disabled) {\n            let nextCheckedValue = !(\n                this.props.checked !== undefined\n                    ? this.props.checked\n                    : this.state.checked\n            );\n\n            this.setState({ checked: nextCheckedValue });\n\n            if (this.props.onChange) {\n                this.props.onChange(nextCheckedValue, this.props.value);\n            }\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        this.setState({ focused: true });\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        this.setState({ focused: false });\n\n        if (this.props.onBlur) {\n            this.props.onBlur(event);\n        }\n    }\n\n    @autobind\n    handleMouseEnter(event) {\n        if (!this.props.disabled) {\n            this.setState({ hovered: true });\n        }\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    }\n\n    @autobind\n    handleMouseLeave(event) {\n        if (!this.props.disabled) {\n            this.setState({ hovered: false });\n        }\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    }\n\n    /**\n     * Устанавливает фокус на чекбокс.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n    }\n\n    /**\n     * Убирает фокус с чекбокса.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    /**\n     * Скроллит страницу до чекбокса.\n     *\n     * @public\n     */\n    scrollTo() {\n        let elementRect = this.root.getBoundingClientRect();\n\n        scrollTo({\n            targetY: (elementRect.top + window.pageYOffset) - SCROLL_TO_CORRECTION\n        });\n    }\n}\n\nexport default CheckBox;\n"]}