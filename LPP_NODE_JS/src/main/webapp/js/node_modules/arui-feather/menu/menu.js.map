{"version":3,"sources":["menu/menu.jsx"],"names":["Menu","state","highlightedItem","checkedItems","hovered","menuItemList","blurTimeoutId","props","content","length","mode","firstItem","getFirstItem","changeCheckedItems","value","clearTimeout","cn","root","style","size","view","disabled","handleMouseEnter","handleMouseLeave","handleKeyDown","handleKeyUp","handleFocus","handleBlur","renderMenuItemList","result","groupKey","forEach","item","type","push","title","renderMenuItem","itemProps","isItemDisabled","clickHandler","onClick","handleMenuItemClick","menuItem","ref","menuItemProps","undefined","instance","getIndexInCheckedItemsList","handleMenuItemMouseEnter","handleMenuItemMouseLeave","setNewCheckedItems","event","setState","onMouseEnter","onMouseLeave","onKeyUp","highlightedMenuItem","menuIteListLength","which","DOWN_ARROW","preventDefault","index","onHighlightItem","UP_ARROW","ENTER","SPACE","onKeyDown","onFocus","persist","setTimeout","document","activeElement","onBlur","focus","autoFocusFirstItem","blur","Array","from","indexInCheckedItemsList","splice","onItemClick","onItemCheck","indexOf","Component","propTypes","string","oneOf","bool","focused","shape","oneOfType","number","any","arrayOf","node","array","object","theme","className","func","defaultProps"],"mappings":"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","file":"menu.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint jsx-a11y/no-static-element-interactions: 0 */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport styleType from 'react-style-proptype';\nimport Type from 'prop-types';\n\nimport MenuItem from '../menu-item/menu-item';\n\nimport cn from '../cn';\nimport { isNodeOutsideElement } from '../lib/window';\nimport keyboardCode from '../lib/keyboard-code';\nimport performance from '../performance';\n\n/**\n * Компонент меню.\n */\n@cn('menu')\n@performance(true)\nclass Menu extends React.Component {\n    static propTypes = {\n        /** Тип расположения меню: 'horizontal' */\n        view: Type.string,\n        /** Тип списка вариантов меню */\n        mode: Type.oneOf(['basic', 'check', 'radio', 'radio-check']),\n        /** Управление возможностью изменения значения */\n        disabled: Type.bool,\n        /** Управление состоянием фокуса элемента */\n        focused: Type.bool,\n        /** Управление автоматическим фокусом на первом элементе при вызове публичного метода focus */\n        autoFocusFirstItem: Type.bool,\n        /** Элемент меню, на котором стоит выделение */\n        highlightedItem: Type.shape({\n            /** Уникальный идентификатор */\n            ref: Type.oneOfType([Type.number, Type.string]),\n            /** Элемент списка типа ContentItem */\n            item: Type.any\n        }),\n        /** Список объектов ContentItem */\n        content: Type.arrayOf(Type.shape({\n            /** Тип элемента */\n            type: Type.oneOf(['item', 'group']),\n            /** Только для type='item', свойство для компонента [MenuItem](../menu-item/) */\n            value: Type.oneOfType([Type.string, Type.number]),\n            /** Содержание элемента */\n            content: Type.oneOfType([Type.node, Type.array]),\n            /** Только для type='item': свойства для компонента [MenuItem](../menu-item/) */\n            props: Type.object\n        })),\n        /** Список значений выбранных элементов */\n        checkedItems: Type.arrayOf(Type.oneOfType([\n            Type.string,\n            Type.number\n        ])),\n        /** Размер компонента */\n        size: Type.oneOf(['s', 'm', 'l', 'xl']),\n        /** Объект со стилями */\n        style: styleType,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.oneOfType([Type.func, Type.string]),\n        /** Обработчик клика по варианту меню */\n        onItemClick: Type.func,\n        /** Обработчик выбора варианта меню */\n        onItemCheck: Type.func,\n        /** Обработчик события наведения курсора на меню */\n        onMouseEnter: Type.func,\n        /** Обработчик события снятия курсора с меню */\n        onMouseLeave: Type.func,\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события отжатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyUp: Type.func,\n        /** Обработчик фокуса */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса */\n        onBlur: Type.func,\n        /** Обработчик события выделения элемента меню, принимает на вход переменную типа HighlightedItem */\n        onHighlightItem: Type.func\n    };\n\n    static defaultProps = {\n        size: 'm',\n        mode: 'basic',\n        autoFocusFirstItem: false\n    };\n\n    state = {\n        highlightedItem: null,\n        checkedItems: [],\n        hovered: false\n    };\n\n    root;\n    menuItemList = [];\n    blurTimeoutId = null;\n\n    componentDidMount() {\n        if (!!this.props.content && this.props.content.length > 0\n            && (!this.props.checkedItems || this.props.checkedItems.length === 0)\n            && this.props.mode === 'radio') {\n            let firstItem = this.getFirstItem(this.props.content);\n\n            this.changeCheckedItems([firstItem.value]);\n        }\n    }\n\n    componentWillUpdate() {\n        this.menuItemList = [];\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n    }\n\n    render(cn) {\n        return (\n            <div\n                ref={ (root) => { this.root = root; } }\n                style={ this.props.style }\n                className={ cn({\n                    size: this.props.size,\n                    view: this.props.view,\n                    hovered: this.state.hovered,\n                    disabled: this.props.disabled,\n                    mode: this.props.mode\n                }) }\n                tabIndex={ 0 }\n                onMouseEnter={ this.handleMouseEnter }\n                onMouseLeave={ this.handleMouseLeave }\n                onKeyDown={ this.handleKeyDown }\n                onKeyUp={ this.handleKeyUp }\n                onFocus={ this.handleFocus }\n                onBlur={ this.handleBlur }\n            >\n                { !!this.props.content && this.renderMenuItemList(cn, this.props.content) }\n            </div>\n        );\n    }\n\n    renderMenuItemList(cn, content) {\n        let result = [];\n        let groupKey = 0;\n\n        content.forEach((item) => {\n            if (item.type === 'group') {\n                result.push(\n                    <div\n                        className={ cn('group') }\n                        key={ `group_${groupKey}` }\n                    >\n                        { !!item.title &&\n                            <div className={ cn('group-title') }>\n                                { item.title }\n                            </div>\n                        }\n                        { this.renderMenuItemList(cn, item.content) }\n                    </div>\n                );\n                groupKey += 1;\n            } else {\n                result.push(this.renderMenuItem(item));\n            }\n        });\n\n        return result;\n    }\n\n    renderMenuItem(item) {\n        let itemProps = item.props || {};\n        let isItemDisabled = this.props.disabled || itemProps.disabled;\n        let clickHandler = this.props.mode === 'basic' ? itemProps.onClick : () => this.handleMenuItemClick(item);\n        let menuItem = {\n            item,\n            ref: item.value\n        };\n        let menuItemProps = {\n            ...itemProps,\n            disabled: isItemDisabled,\n            value: item.value,\n            size: this.props.size || itemProps.size,\n            onClick: !isItemDisabled ? clickHandler : undefined\n        };\n        let highlightedItem = this.props.highlightedItem === undefined\n            ? this.state.highlightedItem\n            : this.props.highlightedItem;\n\n        this.menuItemList.push(menuItem);\n\n        return (\n            <MenuItem\n                { ...menuItemProps }\n                ref={ (instance) => { menuItem.instance = instance; } }\n                key={ item.value }\n                checked={ this.props.mode !== 'basic' && this.getIndexInCheckedItemsList(item.value) !== -1 }\n                type={ this.props.mode !== 'basic' ? 'block' : itemProps.type }\n                onMouseEnter={ () => this.handleMenuItemMouseEnter(menuItem) }\n                onMouseLeave={ this.handleMenuItemMouseLeave }\n                hovered={ highlightedItem && highlightedItem.ref === menuItem.ref }\n            >\n                { item.content }\n            </MenuItem>\n        );\n    }\n\n    @autobind\n    handleMenuItemClick(item) {\n        this.setNewCheckedItems(item);\n    }\n\n    @autobind\n    handleMouseEnter(event) {\n        this.setState({ hovered: true });\n\n        if (this.props.onMouseEnter) {\n            this.props.onMouseEnter(event);\n        }\n    }\n\n    @autobind\n    handleMouseLeave(event) {\n        this.setState({ hovered: false });\n\n        if (this.props.onMouseLeave) {\n            this.props.onMouseLeave(event);\n        }\n    }\n\n    @autobind\n    handleKeyUp(event) {\n        if (this.props.onKeyUp) {\n            this.props.onKeyUp(event);\n        }\n    }\n\n    @autobind\n    handleKeyDown(event) {\n        let highlightedItem = null;\n        let highlightedMenuItem = null;\n        let menuIteListLength = this.menuItemList.length;\n\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index + 1 === menuIteListLength) {\n                                highlightedItem = menuItemList[0];\n                            } else {\n                                highlightedItem = menuItemList[index + 1];\n                            }\n                        }\n                    });\n                } else {\n                    highlightedItem = this.menuItemList[0];\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.UP_ARROW: {\n                event.preventDefault();\n\n                if (this.state.highlightedItem) {\n                    this.menuItemList.forEach((item, index, menuItemList) => {\n                        if (item.ref === this.state.highlightedItem.ref) {\n                            if (index - 1 < 0) {\n                                highlightedItem = menuItemList[menuIteListLength - 1];\n                            } else {\n                                highlightedItem = menuItemList[index - 1];\n                            }\n                        }\n                    });\n                } else {\n                    highlightedItem = this.menuItemList[menuIteListLength - 1];\n                }\n\n                this.setState({\n                    highlightedItem\n                });\n\n                if (this.props.onHighlightItem) {\n                    this.props.onHighlightItem(highlightedItem);\n                }\n\n                break;\n            }\n            case keyboardCode.ENTER:\n            case keyboardCode.SPACE: {\n                event.preventDefault();\n\n                highlightedItem = this.props.highlightedItem === undefined\n                    ? this.state.highlightedItem\n                    : this.props.highlightedItem;\n\n                if (highlightedItem) {\n                    this.setNewCheckedItems(highlightedItem.item);\n                }\n\n                break;\n            }\n        }\n\n        if (highlightedItem) {\n            highlightedMenuItem = highlightedItem.instance;\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event, highlightedMenuItem);\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        event.persist();\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n        }\n\n        this.blurTimeoutId = setTimeout(() => {\n            if (isNodeOutsideElement(document.activeElement, this.root) && this.props.onBlur) {\n                this.props.onBlur(event);\n            }\n            this.blurTimeoutId = null;\n        }, 0);\n    }\n\n    handleMenuItemMouseEnter(menuItem) {\n        this.setState({\n            highlightedItem: menuItem\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(menuItem);\n        }\n    }\n\n    @autobind\n    handleMenuItemMouseLeave() {\n        this.setState({\n            highlightedItem: null\n        });\n\n        if (this.props.onHighlightItem) {\n            this.props.onHighlightItem(null);\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Устанавливает фокус на меню.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n\n        if (this.props.autoFocusFirstItem) {\n            let highlightedItem = this.menuItemList[0];\n            this.setState({\n                highlightedItem\n            });\n\n            if (this.props.onHighlightItem) {\n                this.props.onHighlightItem(highlightedItem);\n            }\n        }\n    }\n\n    /**\n     * Убирает фокус с меню.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    setNewCheckedItems(item) {\n        let value = item.value;\n        let checkedItems = this.props.checkedItems !== undefined\n            ? Array.from(this.props.checkedItems)\n            : Array.from(this.state.checkedItems);\n        let indexInCheckedItemsList = this.getIndexInCheckedItemsList(value);\n\n        switch (this.props.mode) {\n            case 'check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems.push(value);\n                } else {\n                    checkedItems.splice(indexInCheckedItemsList, 1);\n                }\n                break;\n            case 'radio':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                }\n                break;\n            case 'radio-check':\n                if (indexInCheckedItemsList === -1) {\n                    checkedItems = [value];\n                } else {\n                    checkedItems = [];\n                }\n                break;\n            default:\n                break;\n        }\n\n        if (this.props.onItemClick) {\n            this.props.onItemClick(item);\n        }\n\n        this.changeCheckedItems(checkedItems);\n        this.focus();\n    }\n\n    /**\n     * Изменяет выбранные значения.\n     *\n     * @param {Array.<String|Number>} checkedItems Список выбранных значений\n     */\n    changeCheckedItems(checkedItems) {\n        this.setState({\n            checkedItems\n        });\n\n        if (this.props.onItemCheck) {\n            this.props.onItemCheck(checkedItems);\n        }\n    }\n\n    @autobind\n    getIndexInCheckedItemsList(value) {\n        let checkedItems = this.props.checkedItems ? this.props.checkedItems : this.state.checkedItems;\n        return checkedItems.indexOf(value);\n    }\n\n    getFirstItem(content) {\n        let firstItem = content[0];\n\n        return firstItem.type === 'group' ? this.getFirstItem(firstItem.content) : firstItem;\n    }\n}\n\nexport default Menu;\n"]}