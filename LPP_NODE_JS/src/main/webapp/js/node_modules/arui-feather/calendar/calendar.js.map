{"version":3,"sources":["calendar/calendar.jsx"],"names":["DAYS_IN_WEEK","ATTR_DAY","ATTR_STEP_SIZE","ATTR_DISABLED","Calendar","blurTimeoutId","prepareData","nextProps","clearTimeout","cn","rows","push","renderShortWeekdays","concat","renderMonth","root","handleBlur","handleFocus","props","isKeyboard","handleKeyDown","handleKeyUp","renderTitle","map","row","index","month","Date","state","isPrevMonthEnabled","earlierLimit","isNextMonthEnabled","laterLimit","prevYearEarlierLimit","isPrevYearEnabled","nextYearLaterLimit","isNextYearEnabled","showArrows","direction","double","disabled","handleArrowClick","months","getMonth","getFullYear","weekdays","weekdayName","type","calculateWeeks","renderWeek","week","day","off","isValidDate","val","value","weekend","mods","isSameDate","getTime","isBetweenPeriod","selectedFrom","selectedTo","dataDay","handleDayClick","getDate","event","target","attributes","performChange","parseInt","nodeValue","onFocus","persist","setTimeout","document","activeElement","onBlur","currentTarget","stepSize","step","newMonth","setMonth","onMonthChange","valueOf","setState","which","DOWN_ARROW","preventDefault","performChangeWithShift","UP_ARROW","LEFT_ARROW","RIGHT_ARROW","onKeyDown","onKeyUp","focus","blur","isFinite","isOffDay","date","offDays","length","timestamp","isTriggeredByKeyboard","onValueChange","outputFormat","dayShift","ensureValueInLimits","Math","abs","shiftedDay","weekDay","weeks","lastDay","dateIterator","Array","fill","setDate","isInitializing","maxTimestamp","max","minTimestamp","min","Component","propTypes","number","func","string","arrayOf","bool","theme","oneOf","className","oneOfType","defaultProps"],"mappings":"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","file":"calendar.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/* eslint jsx-a11y/no-static-element-interactions: 0 */\n\nimport { autobind } from 'core-decorators';\nimport React from 'react';\nimport Type from 'prop-types';\n\nimport differenceInMonths from 'date-fns/difference_in_months';\nimport differenceInMilliseconds from 'date-fns/difference_in_milliseconds';\nimport startOfDay from 'date-fns/start_of_day';\nimport startOfMonth from 'date-fns/start_of_month';\nimport addDays from 'date-fns/add_days';\nimport addYears from 'date-fns/add_years';\nimport subtractYears from 'date-fns/sub_years';\nimport formatDate from 'date-fns/format';\nimport sortedIndexOf from 'lodash.sortedindexof';\n\nimport cn from '../cn';\nimport keyboardCode from '../lib/keyboard-code';\nimport performance from '../performance';\nimport { normalizeDate, getRussianWeekDay } from '../lib/date-utils';\nimport { isNodeOutsideElement } from '../lib/window';\n\nconst DAYS_IN_WEEK = 7;\nconst ATTR_DAY = 'data-day';\nconst ATTR_STEP_SIZE = 'data-step';\nconst ATTR_DISABLED = 'data-disabled';\n\n/**\n * Компонент календаря.\n */\n@cn('calendar')\n@performance(true)\nclass Calendar extends React.Component {\n    static propTypes = {\n        /** Выбранная дата, в формате unix timestamp */\n        value: Type.number,\n        /** Левая граница диапазона дат, в формате unix timestamp */\n        selectedFrom: Type.number,\n        /** Правая граница диапазона дат, в формате unix timestamp */\n        selectedTo: Type.number,\n        /** Левая граница дат, возможных для выбора, в формате unix timestamp */\n        earlierLimit: Type.number,\n        /** Правая граница дат, возможных для выбора, в формате unix timestamp */\n        laterLimit: Type.number,\n        /** Месяц, в формате unix timestamp */\n        month: Type.number,\n        /** Обработчик смены даты */\n        onValueChange: Type.func,\n        /** Обработчик смены месяца */\n        onMonthChange: Type.func,\n        /** Тип форматирования даты при выводе */\n        outputFormat: Type.string,\n        /** Список названий месяцев */\n        months: Type.arrayOf(Type.string),\n        /** Список названий дней недели */\n        weekdays: Type.arrayOf(Type.string),\n        /** Список выходных дней в виде unix timestamp, отсортированный по возрастанию */\n        offDays: Type.arrayOf(Type.number),\n        /** Отображение стрелок навигации по месяцам */\n        showArrows: Type.bool,\n        /** Возможность управления календарём с клавиатуры */\n        isKeyboard: Type.bool,\n        /** Тема компонента */\n        theme: Type.oneOf(['alfa-on-color', 'alfa-on-white']),\n        /** Дополнительный класс */\n        className: Type.oneOfType([Type.func, Type.string]),\n        /** Обработчик события нажатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyDown: Type.func,\n        /** Обработчик события отжатия на клавишу клавиатуры в момент, когда фокус находится на компоненте */\n        onKeyUp: Type.func,\n        /** Обработчик фокуса */\n        onFocus: Type.func,\n        /** Обработчик снятия фокуса */\n        onBlur: Type.func\n    };\n\n    static defaultProps = {\n        selectedFrom: null,\n        selectedTo: null,\n        outputFormat: 'DD.MM.YYYY',\n        weekdays: ['Пн', 'Вт', 'Ср', 'Чт', 'Пт', 'Сб', 'Вс'],\n        months: ['Январь', 'Февраль', 'Март', 'Апрель', 'Май', 'Июнь',\n            'Июль', 'Август', 'Сентябрь', 'Октябрь', 'Ноябрь', 'Декабрь'],\n        offDays: [],\n        showArrows: true,\n        isKeyboard: true\n    };\n\n    /**\n     * @type {HTMLDivElement}\n     */\n    root;\n\n    /**\n     * @type {Number}\n     */\n    blurTimeoutId = null;\n\n    componentWillMount() {\n        this.prepareData();\n    }\n\n    componentWillReceiveProps(nextProps) {\n        this.prepareData(nextProps);\n    }\n\n    componentWillUnmount() {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n    }\n\n    render(cn) {\n        let rows = [];\n        rows.push(this.renderShortWeekdays(cn));\n        rows = rows.concat(this.renderMonth(cn));\n\n        return (\n            <div\n                ref={ (root) => { this.root = root; } }\n                className={ cn }\n                tabIndex='0'\n                onBlur={ this.handleBlur }\n                onFocus={ this.handleFocus }\n                onKeyDown={ this.props.isKeyboard && this.handleKeyDown }\n                onKeyUp={ this.props.isKeyboard && this.handleKeyUp }\n            >\n                { this.renderTitle(cn) }\n                <table className={ cn('layout') }>\n                    <tbody>\n                        {\n                            rows.map((row, index) => (\n                                <tr\n                                    className={ cn('row') }\n                                    key={ `row_${index + 1}` }\n                                >\n                                    { row }\n                                </tr>\n                            ))\n                        }\n                    </tbody>\n                </table>\n            </div>\n        );\n    }\n\n    renderTitle(cn) {\n        const month = new Date(this.state.month);\n        let isPrevMonthEnabled = !this.earlierLimit\n            || differenceInMonths(month, startOfMonth(this.earlierLimit)) > 0;\n        let isNextMonthEnabled = !this.laterLimit\n            || differenceInMonths(month, this.laterLimit) < 0;\n        let prevYearEarlierLimit = this.earlierLimit && addYears(this.earlierLimit, 1);\n        let isPrevYearEnabled = !this.earlierLimit\n            || differenceInMonths(month, prevYearEarlierLimit) >= 0;\n        let nextYearLaterLimit = this.laterLimit && subtractYears(this.laterLimit, 1);\n        let isNextYearEnabled = !this.laterLimit\n            || differenceInMonths(month, nextYearLaterLimit) <= 0;\n\n        return (\n            <div className={ cn('title') }>\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'left',\n                                double: true,\n                                disabled: !isPrevYearEnabled\n                            })\n                        }\n                        data-step='-12'\n                        data-disabled={ !isPrevMonthEnabled }\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'left',\n                                disabled: !isPrevMonthEnabled\n                            })\n                        }\n                        data-step='-1'\n                        data-disabled={ !isPrevMonthEnabled }\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'right',\n                                double: true,\n                                disabled: !isNextYearEnabled\n                            })\n                        }\n                        data-step='12'\n                        data-disabled={ !isNextMonthEnabled }\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                {\n                    this.props.showArrows &&\n                    <div\n                        className={\n                            cn('arrow', {\n                                direction: 'right',\n                                disabled: !isNextMonthEnabled\n                            })\n                        }\n                        data-step='1'\n                        data-disabled={ !isNextMonthEnabled }\n                        onClick={ this.handleArrowClick }\n                    />\n                }\n                <div className={ cn('name') }>\n                    { `${this.props.months[month.getMonth()]} ${month.getFullYear()}` }\n                </div>\n            </div>\n        );\n    }\n\n    renderShortWeekdays(cn) {\n        return this.props.weekdays.map((weekdayName, index) => (\n            <th\n                className={ cn('dayname', { type: index > 4 ? 'weekend' : false }) }\n                key={ weekdayName }\n            >\n                { weekdayName }\n            </th>\n        ));\n    }\n\n    renderMonth(cn) {\n        return this.calculateWeeks().map(week => this.renderWeek(cn, week));\n    }\n\n    renderWeek(cn, week) {\n        return week.map((day, index) => {\n            let off = !this.isValidDate(day);\n            let val = this.value;\n            let weekend = index > 4;\n            let mods = {};\n            if (day) {\n                let isSameDate = val && val.getTime() === day.getTime();\n                let isBetweenPeriod = this.selectedFrom && this.selectedTo &&\n                    this.selectedFrom <= day && this.selectedTo >= day;\n\n                if (off || weekend) {\n                    if (weekend) {\n                        mods.type = off ? 'weekend-off' : 'weekend';\n                    } else {\n                        mods.type = 'off';\n                    }\n                }\n\n                if (isSameDate || isBetweenPeriod) {\n                    mods.state = 'current';\n                }\n            }\n\n            let dataDay = day && !off\n                ? day.getTime()\n                : null;\n\n            return (\n                <td\n                    className={ cn('day', mods) }\n                    data-day={ dataDay }\n                    key={ day || `day_${index + 1}` }\n                    onClick={ this.handleDayClick }\n                >\n                    { day ? day.getDate() : '' }\n                </td>\n            );\n        });\n    }\n\n    @autobind\n    handleDayClick(event) {\n        let day = event.target.attributes[ATTR_DAY];\n        if (day) {\n            this.performChange(parseInt(day.nodeValue, 10));\n        }\n    }\n\n    @autobind\n    handleFocus(event) {\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n            this.blurTimeoutId = null;\n        }\n\n        if (this.props.onFocus) {\n            this.props.onFocus(event);\n        }\n    }\n\n    @autobind\n    handleBlur(event) {\n        event.persist();\n        if (this.blurTimeoutId) {\n            clearTimeout(this.blurTimeoutId);\n        }\n\n        this.blurTimeoutId = setTimeout(() => {\n            if (isNodeOutsideElement(document.activeElement, this.root) && this.props.onBlur) {\n                this.props.onBlur(event);\n            }\n            this.blurTimeoutId = null;\n        }, 0);\n    }\n\n    @autobind\n    handleArrowClick(event) {\n        if (event.currentTarget.attributes[ATTR_DISABLED].nodeValue === 'true') {\n            return;\n        }\n\n        let stepSize = event.currentTarget.attributes[ATTR_STEP_SIZE].nodeValue;\n        let step = parseInt(stepSize, 10);\n        let newMonth = new Date(this.state.month);\n        newMonth.setMonth(newMonth.getMonth() + step);\n\n        if (this.props.onMonthChange) {\n            this.props.onMonthChange(newMonth.valueOf());\n        } else {\n            this.setState({\n                month: newMonth.valueOf()\n            });\n        }\n    }\n\n    @autobind\n    handleKeyDown(event) {\n        switch (event.which) {\n            case keyboardCode.DOWN_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(7, true);\n                break;\n            }\n            case keyboardCode.UP_ARROW:\n                event.preventDefault();\n                this.performChangeWithShift(-7, true);\n                break;\n            case keyboardCode.LEFT_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(-1, true);\n                break;\n            }\n            case keyboardCode.RIGHT_ARROW: {\n                event.preventDefault();\n                this.performChangeWithShift(1, true);\n                break;\n            }\n        }\n\n        if (this.props.onKeyDown) {\n            this.props.onKeyDown(event);\n        }\n    }\n\n    @autobind\n    handleKeyUp(event) {\n        if (this.props.onKeyUp) {\n            this.props.onKeyUp(event);\n        }\n    }\n\n    /**\n     * Устанавливает фокус на календарь.\n     *\n     * @public\n     */\n    focus() {\n        this.root.focus();\n    }\n\n    /**\n     * Убирает фокус с календаря.\n     *\n     * @public\n     */\n    blur() {\n        if (document.activeElement) {\n            document.activeElement.blur();\n        }\n    }\n\n    /**\n     * Возвращает корневой `HTMLElement` компонента.\n     *\n     * @public\n     * @returns {HTMLElement}\n     */\n    getNode() {\n        return this.root;\n    }\n\n    /**\n     * Возвращает `true`, если переданная дата является валидной,\n     * попадает в заданные лимиты календаря и не является выходным днем.\n     *\n     * @param {Date|Number} value Дата для проверки\n     * @returns {Boolean}\n     */\n    isValidDate(value) {\n        if (!value) {\n            return false;\n        }\n\n        if (!(value instanceof Date) || !isFinite(value.valueOf())) {\n            return false;\n        }\n\n        return !(\n            (this.earlierLimit && this.earlierLimit > value) ||\n            (this.laterLimit && this.laterLimit < value) ||\n            this.isOffDay(value)\n        );\n    }\n\n    /**\n     * Возвращает `true`, если переданная дата является выходным днем.\n     *\n     * @param {Data|Number} date Дата для проверки\n     * @returns {Boolean}\n     */\n    isOffDay(date) {\n        if (this.props.offDays && this.props.offDays.length) {\n            let timestamp = date.valueOf();\n\n            // Поскольку offDays - отсортирован, используем бинарный поиск, O(log n) против O(n) для обычного поиска\n            return sortedIndexOf(this.props.offDays, timestamp) !== -1;\n        }\n\n        return false;\n    }\n\n    /**\n     * Генерирует событие, что значие даты изменилось.\n     *\n     * @param {Number} timestamp Дата\n     * @param {Boolean} [isTriggeredByKeyboard=false] Флаг, что событие произошло из-за нажатия пользователем кнопки на клавиатуре\n     */\n    performChange(timestamp, isTriggeredByKeyboard) {\n        if (!this.props.onValueChange) {\n            return;\n        }\n\n        let date = new Date(timestamp);\n        if (!this.isValidDate(date)) {\n            return;\n        }\n\n        this.props.onValueChange(\n            timestamp,\n            formatDate(date, this.props.outputFormat),\n            isTriggeredByKeyboard\n        );\n    }\n\n    /**\n     * Генерирует событие, что значение даты изменилось на переданной число дней.\n     *\n     * @param {Number} dayShift Смещение текущей даты в днях.\n     * @param {Boolean} [isTriggeredByKeyboard=false] Флаг, что событие произошло из-за нажатия пользователем кнопки на клавиатуре\n     */\n    performChangeWithShift(dayShift, isTriggeredByKeyboard) {\n        if (!this.ensureValueInLimits(dayShift)) {\n            return;\n        }\n\n        let value = this.value;\n        while (this.isOffDay(addDays(value, dayShift))) {\n            dayShift += Math.abs(dayShift) / dayShift;\n        }\n\n        if (!this.value) {\n            this.performChange(this.state.month, true);\n        } else {\n            this.performChange(addDays(value, dayShift).valueOf(), isTriggeredByKeyboard);\n        }\n    }\n\n    ensureValueInLimits(dayShift) {\n        let shiftedDay = addDays(this.value, dayShift);\n\n        return (!this.earlierLimit || differenceInMilliseconds(shiftedDay, this.earlierLimit) >= 0)\n            && (!this.laterLimit || differenceInMilliseconds(shiftedDay, this.laterLimit) <= 0);\n    }\n\n    calculateWeeks() {\n        let weekDay;\n        let weeks = [];\n        let lastDay = 6;\n        let month = new Date(this.state.month);\n        let dateIterator = new Date(this.state.month);\n\n        // Далее я использую map для обхода массива, но при создании через new Array(DAYS_IN_WEEK);\n        // map не вызывает колбек, для ключей, к которым не были приассигнены значения\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\n        // соответственно пропадают undefined значения, поэтому:\n        let week = (new Array(DAYS_IN_WEEK)).fill(null);\n\n        for (\n            dateIterator.setDate(1);\n            dateIterator.getMonth() === month.getMonth();\n            dateIterator.setDate(dateIterator.getDate() + 1)\n        ) {\n            weekDay = getRussianWeekDay(dateIterator); // Получаем 0 - пн, 1 - вт, и т.д.\n\n            week[weekDay] = new Date(dateIterator.getTime());\n\n            if (weekDay === lastDay) {\n                weeks.push(week);\n                week = (new Array(DAYS_IN_WEEK)).fill(null);\n            }\n        }\n\n        if (weekDay !== lastDay) {\n            weeks.push(week);\n        }\n\n        return weeks;\n    }\n\n    prepareData(nextProps) {\n        let isInitializing = false;\n        if (!nextProps) {\n            nextProps = this.props;\n            isInitializing = true;\n        }\n\n        if (isInitializing || this.props.value !== nextProps.value) {\n            if (nextProps.value) {\n                this.value = startOfDay(normalizeDate(nextProps.value));\n            } else {\n                this.value = null;\n            }\n        }\n\n        let month;\n        if (nextProps.month) {\n            month = normalizeDate(nextProps.month);\n        } else if (this.value) {\n            month = new Date(this.value.valueOf());\n        } else {\n            month = new Date();\n        }\n        this.setState({ month: startOfMonth(month) });\n\n        if (isInitializing || this.props.earlierLimit !== nextProps.earlierLimit) {\n            this.earlierLimit = nextProps.earlierLimit ? normalizeDate(nextProps.earlierLimit) : null;\n\n            if (this.earlierLimit) {\n                this.earlierLimit = startOfDay(this.earlierLimit);\n                if (this.value) {\n                    let maxTimestamp = Math.max(\n                        this.value.valueOf(),\n                        this.earlierLimit.valueOf()\n                    );\n                    this.value = new Date(maxTimestamp);\n                }\n            }\n        }\n\n        if (isInitializing || this.props.laterLimit !== nextProps.laterLimit) {\n            this.laterLimit = nextProps.laterLimit ? normalizeDate(nextProps.laterLimit) : null;\n\n            if (this.laterLimit) {\n                this.laterLimit = startOfDay(this.laterLimit);\n                if (this.value) {\n                    let minTimestamp = Math.min(\n                        this.value.valueOf(),\n                        this.laterLimit.valueOf()\n                    );\n                    this.value = new Date(minTimestamp);\n                }\n            }\n        }\n\n        if (isInitializing || this.props.selectedTo !== nextProps.selectedTo) {\n            this.selectedFrom = nextProps.selectedTo ? normalizeDate(nextProps.selectedTo) : null;\n        }\n\n        if (isInitializing || this.props.selectedFrom !== nextProps.selectedFrom) {\n            this.selectedFrom = nextProps.selectedFrom ? normalizeDate(nextProps.selectedFrom) : null;\n        }\n    }\n}\n\nexport default Calendar;\n"]}