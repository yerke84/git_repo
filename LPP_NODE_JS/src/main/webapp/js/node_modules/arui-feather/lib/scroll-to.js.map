{"version":3,"sources":["lib/scroll-to.js"],"names":["scrollTo","options","targetY","container","duration","easing","scrollY","scrollTop","window","pageYOffset","startTime","performance","now","Error","Promise","resolve","scrollToTarget","y","loop","timestamp","currentTime","Math","abs","t","val","currentTargetY","requestAnimationFrame"],"mappings":";;;;;kBAkBwBA,Q;;AAdxB;;;;AACA;;;;AAEA;;;;;;;;;;;AAPA;;;;AAkBe,SAASA,QAAT,CAAkBC,OAAlB,EAA2B;AAAA,QAElCC,OAFkC,GAMlCD,OANkC,CAElCC,OAFkC;AAAA,QAGlCC,SAHkC,GAMlCF,OANkC,CAGlCE,SAHkC;AAAA,4BAMlCF,OANkC,CAIlCG,QAJkC;AAAA,QAIlCA,QAJkC,qCAIvB,CAJuB;AAAA,0BAMlCH,OANkC,CAKlCI,MALkC;AAAA,QAKlCA,MALkC;;;AAQtC,QAAIC,UAAUH,YAAYA,UAAUI,SAAtB,GAAkCC,OAAOC,WAAvD;AACA,QAAIC,YAAYF,OAAOG,WAAP,CAAmBC,GAAnB,EAAhB;;AAEA,QAAIR,WAAW,CAAf,EAAkB;AACd,cAAM,IAAIS,KAAJ,CAAU,+BAAV,CAAN;AACH;;AAED,QAAI,CAAC,kBAAQR,MAAR,CAAL,EAAsB;AAClB,cAAM,IAAIQ,KAAJ,CAAU,6BAAV,CAAN;AACH;;AAEDR,aAAS,kBAAQA,MAAR,CAAT;;AAEA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5B,iBAASC,cAAT,CAAwBC,CAAxB,EAA2B;AACvB,gBAAId,SAAJ,EAAe;AACXA,0BAAUI,SAAV,GAAsBU,CAAtB;AACH,aAFD,MAEO;AACHT,uBAAOR,QAAP,CAAgB,CAAhB,EAAmBiB,CAAnB;AACH;AACJ;;AAED,iBAASC,IAAT,CAAcC,SAAd,EAAyB;AACrB,gBAAIC,cAAcC,KAAKC,GAAL,CAASH,YAAYT,SAArB,CAAlB;AACA,gBAAIa,IAAIH,cAAchB,QAAtB;AACA,gBAAIoB,MAAMnB,OAAOkB,CAAP,CAAV;AACA,gBAAIE,iBAAiBnB,UAAW,CAACJ,UAAUI,OAAX,IAAsBkB,GAAtD;;AAEA,gBAAID,IAAI,CAAR,EAAW;AACPf,uBAAOkB,qBAAP,CAA6BR,IAA7B;AACAF,+BAAeS,cAAf;AACH,aAHD,MAGO;AACHT,+BAAed,OAAf;AACAa;AACH;AACJ;;AAED,YAAIX,aAAa,CAAjB,EAAoB;AAChBY,2BAAed,OAAf;AACAa;AACH,SAHD,MAGO;AACHG,iBAAKV,OAAOG,WAAP,CAAmBC,GAAnB,EAAL;AACH;AACJ,KA9BM,CAAP;AA+BH","file":"scroll-to.js","sourcesContent":["/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\nimport easings from './easings';\nimport { SCROLL_TO_EASING } from '../vars';\n\n/**\n * Скроллит по элементу или странице.\n * В настоящее время доступно перемещение только по оси Y.\n *\n * @param {Options} options Список переданных опций\n * @param {Number} options.targetY Цель по оси Y\n * @param {HTMLElement} [options.container] Элемент в котором скроллим\n * @param {Number} [options.duration=0] Продолжительность анимации в миллесекундах\n * @param {String} [options.easing='easeInOutSine'] Название функции плавности для анимации\n * @returns {Promise}\n */\nexport default function scrollTo(options) {\n    let {\n        targetY,\n        container,\n        duration = 0,\n        easing = SCROLL_TO_EASING\n    } = options;\n\n    let scrollY = container ? container.scrollTop : window.pageYOffset;\n    let startTime = window.performance.now();\n\n    if (duration < 0) {\n        throw new Error('Incorrect duration in options');\n    }\n\n    if (!easings[easing]) {\n        throw new Error('Incorrect easing in options');\n    }\n\n    easing = easings[easing];\n\n    return new Promise((resolve) => {\n        function scrollToTarget(y) {\n            if (container) {\n                container.scrollTop = y;\n            } else {\n                window.scrollTo(0, y);\n            }\n        }\n\n        function loop(timestamp) {\n            let currentTime = Math.abs(timestamp - startTime);\n            let t = currentTime / duration;\n            let val = easing(t);\n            let currentTargetY = scrollY + ((targetY - scrollY) * val);\n\n            if (t < 1) {\n                window.requestAnimationFrame(loop);\n                scrollToTarget(currentTargetY);\n            } else {\n                scrollToTarget(targetY);\n                resolve();\n            }\n        }\n\n        if (duration === 0) {\n            scrollToTarget(targetY);\n            resolve();\n        } else {\n            loop(window.performance.now());\n        }\n    });\n}\n"]}